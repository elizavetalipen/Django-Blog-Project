{% extends 'base.html' %}

{% block content %}
    <div class="row">
        <div class="col-md-8 col-sm 12">
            <div class="post">
                <img src="/media/{{ post.post_image }}" 
                class="card-img-top img-fluid" style="width:60%; height:50%;
                 object-fit: cover; object-position: center;">
                <h1 class="mt-3">{{ post.title }}</h1>
                <div class="post-meta">
                    <p>
                        <i class="bi bi-person"></i>
                        {{post.user.username}}
                        {{ post.published|date:"F d, Y" }},
                    </p>
                    <div class="post-tags">
                        {% for tag in tags %}
                            <p style="color: rgb(60, 47, 75);
                            display: inline-block;">#{{ tag.tag.title }}</p>
                        {% endfor %}
                    </div>
                    {% if request.user == post.user %}
                        <a href="{% url 'edit_post' post.pk %}" class="btn btn-primary">
                            Edit <i class="bi bi-pencil-square"></i>
                        </a>
                        <a href="{% url 'delete_post' pk=post.pk %}" class="btn btn-danger" 
                        id="delete-btn">Delete</a>

                        {% endif %}
                </div>
                <p class="mt-4">{{ post.content|linebreaksbr }}</p>
            </div>
        </div>
    </div>
{% endblock %}

<script>
    document.getElementById('delete-btn').addEventListener('click', function(event) {
      event.preventDefault(); // prevent the default link behavior
      
      if (confirm('Are you sure you want to delete this post?')) {
        window.location.href = this.getAttribute('href'); // navigate to the delete URL
      }
    });
    </script>
